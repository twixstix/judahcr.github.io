<!doctype html>
<html>
<head>
	<link rel="icon" type="image/x-icon" href= "../favicon.ico"/>
	<title>0px Tier List Creator</title>
	<link href="https://fonts.googleapis.com/css?family=Roboto:400,100italic,700" rel="stylesheet" type="text/css">
	<link href="newstyle.css" rel="stylesheet">
	<link href="dragula.min.css" rel="stylesheet">
	<link rel="author" href="http://0px.moe" />
	<meta charset="utf-8"/>
	<meta content='width=device-width, initial-scale=1' name='viewport'/>
	<meta name="description" content="Create tier lists for your favorite games! Smash, Guilty Gear, Street Fighter, and more!"/>
	<meta name="keywords" content="tier list creator, tier list, tier list maker, esports, gaming, games, fighting games, hot anime tiddies">
</head>
<body>
	<nav class="controlList">
		<div id="controls">
			<h1 style="text-transform: none;"><a style="color: inherit;" href="http://0px.moe">0px</a> TIER LIST CREATOR</h1>
			<div id="buttons">
				<button id="screenshot">Share & Import</button>
				<button id="game">Change Game</button>
				<button id="hidebuttons">Hide Controls</button>
				<button id="reset">Reset List</button>
				<button id="help">Help</button>
			</div>
		</div>
	</nav>
	
	<div id="tablewrap"><div class="tablePadding"><table><tbody>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">S</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">A</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">B</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">C</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">D</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">E</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
		<tr>
			<td class="labelHolder" contenteditable="true"><span class="label">F</span></td>
			<td><div class="tier sort" id="rows"></div></td>
			<td><div id="settings"></div><div id="moveButtons"><div id="moveUp"></div><div id="moveDown"></div></div></td>
		</tr>
	</tbody></table>
	</div></div>
	
	<div id="char" class="sort">
		<div>If no characters are loaded here, choose a game by clicking the "Change Game" button above.</div>
	</div>
	
	<div id="overlay">
		<div id="modalWrapper">
			<div id="modal">
				<h1>SETTINGS</h1>
				<span id="close"></span>
				<p>Tier Color:</p>
				<div id="colorselect"><span style="background:#FF7F7F"></span><span style="background:#FFBF7F"></span><span style="background:#FFDF7F"></span><span style="background:#FFFF7F"></span><span style="background:#BFFF7F"></span><span style="background:#7FFF7F"></span><span style="background:#7FFFFF"></span><span style="background:#7FBFFF"></span><span style="background:#7F7FFF"></span><span style="background:#FF7FFF"></span><span style="background:#BF7FBF"></span><span style="background:#3B3B3B"></span><span style="background:#858585"></span><span style="background:#F7F7F7"></span></div>
				<p>Tier Name:</p><textarea id="labelName"></textarea>
				<p>Options:</p>
				<p><button id="deleteRow">Delete Current Tier</button> <button id="clearRow">Clear Tier</button></p>
				<p><button id="addRowUp">Add Tier Above</button><button id="addRowBelow">Add Tier Below</button></p>
			</div>
			<div id="gameChange">
				<h1>CHANGE GAME</h1>
				<span id="close"></span>
				<div id="switchButtons">
				<!-- SMASH -->
					<button id="switch64">Super Smash Bros. 64</button>
					<button id="switchMelee">Super Smash Bros. Melee</button>
					<button id="switchBrawl">Super Smash Bros. Brawl</button>
					<button id="switchSSB4Renders">Super Smash Bros. 4</button>
					<button id="switchPM">Project M</button>
					<button id="switchSSF2">Super Smash Flash 2</button>
					<button id="switchBrawlMinus">Brawl Minus</button>
					<button id="switchBrawlZeus">Brawl Zeus</button><br>
				<!-- FIGHTING -->
					<!-- <button id="switchDBFZ">Dragon Ball FighterZ</button> THE IMAGES SUCK FOR THIS SO IT'S DISABLED FOR NOW-->
					<button id="switchSFV">Street Fighter V</button>
					<button id="switch3S">Street Fighter III: 3rd Strike</button>
					<button id="switchGGREV">Guilty Gear Xrd Revelator & REV2</button>
					<button id="switchBrawlhalla">Brawlhalla</button><br>
<!-- 					<button id="switchSmash4">Super Smash Bros. 4 (Screenshots)</button> -->
				<!-- OTHER -->
					<button id="switchOW">Overwatch</button>
				</div>
				<p>Changing your game <strong>will</strong> empty your tier list! You cannot undo this.</p>
			</div>
			<div id="helpMenu">
				<h1>HELP</h1>
				<p>
					<dl>
						<dt>Share & Import</dt>
						<dd>The top half creates a shareable image for your tier list. Simply right-click and choose "Save Image As" to save your tier list. The bottom half gives you a shareable code for an editable version of your tier list. If you have a code, paste it into the box and click "Import Tier List".<br>This will overwrite your current tier list with the one you've imported.</dd>
						<dt>Change Game</dt>
						<dd>Allows you to choose a different game. This will overwrite your current tier list.</dt>
						<dt>Hide Controls</dt>
						<dd>Hides the control buttons on the right-side of the creator. Good for mobile!</dd>
						<dt>Reset List</dt>
						<dd>Clears your entire tier list. Please be sure you want to reset your tier list before clicking.</dd>
					</dl>
				</p>
				<h1>ABOUT</h1>
				<span id="close"></span>
				<p>This is a new and maintained version of the original Smash Tier List Maker created<baby>(?)</baby> by <a href="https://github.com/quetzle">Quetzle</a>. 
					I used to have my own fork of this project a long time ago, but due to hosting trouble and lack of version control, I lost it. But now it's back... with version control! 
				</p>
				<p>For updates and changelogs, <a href="http://blog.0px.moe">check out my blog</a>.<br>
				If you want to contact me, send an email to <a href="mailto:judah@0px.moe">judah@0px.moe</a> or tweet <a href="https://twitter.com/kyotoshift">@kyotoshift</a>.
				</p>
			</div>
			<div id="screenshotShow">
				<span id="close"></span>
				<p style="text-align: center;">Your image should appear above. If not, give it a moment or try opening this again.</p>
			<textarea id="exportcode" cols="30" rows="8"></textarea><div style="padding: 10px;"><button id="runCode">Import Tier List</button></div>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="dragula.min.js"></script>
	<script src="html2canvas.js"></script>
	<script>
		dragula({
			isContainer: function (el) {
				return el.classList.contains('sort');
			},
			invalid: function (el){
				return console.log("invalid target");
			}
		}).on('drag', function(el, source) {
        		$("body").css("touch-action", "none");
    		$(document).on('touchstart', function(e) {
    	});
    	}).on("drop", function() {
			localStorage.setItem("TierListMakerCode",toCode());
			$("body").css("touch-action", "pan-y");
		});
		
		// character images
		var singleChar = "<div class='character'></div>";
		// var gameSmash4 = ["ssb4","mario","luigi","peach","bowser","yoshi","rosalinaluma","bowserjr","wario","donkeykong","diddykong","mrgamewatch","littlemac","link","zelda","sheik","ganondorf","toonlink","samus","zerosuitsamus","pit","palutena","marth","ike","robin","duckhunt","kirby","kingdedede","metaknight","fox","falco","pikachu","charizard","lucario","jigglypuff","greninja","rob","ness","captainfalcon","villager","olimar","wiifittrainer","shulk","drmario","darkpit","lucina","pacman","megaman","sonic","mewtwo","lucas","roy","ryu","cloud","corrin","bayonetta","miibrawler1","miigunner1","miisword1","miibrawler","miigunner","miisword"];
		var gameSSB4Renders = ["ssb4r","mario","luigi","peach","bowser","yoshi","rosalinaluma","bowserjr","wario","donkeykong","diddykong","mrgamewatch","littlemac","link","zelda","sheik","ganondorf","toonlink","samus","zerosuitsamus","pit","palutena","marth","ike","robin","duckhunt","kirby","kingdedede","metaknight","fox","falco","pikachu","charizard","lucario","jigglypuff","greninja","rob","ness","captainfalcon","villager","olimar","wiifittrainer","shulk","drmario","darkpit","lucina","pacman","megaman","sonic","mewtwo","lucas","roy","ryu","cloud","corrin","bayonetta","miibrawler1","miigunner1","miisword1","miibrawler","miigunner","miisword"];
		var gameMelee = ["melee","drmario","mario","luigi","bowser","peach","yoshi","dk","falcon","ganon","falco","fox","ness","icies","kirby","samus","zelda","sheik","link","ylink","pichu","pikachu","jigglypuff","mewtwo","gnw","marth","roy"];
		var game64 = ["64","luigi","mario","dk","link","samus","falcon","ness","yoshi","kirby","fox","pikachu","jigglypuff"];
		var gameBrawl = ["brawl","mario","luigi","peach","bowser","donkeykong","diddykong","yoshi","wario","link","zelda","sheik","ganondorf","toonlink","samus","zerosuitsamus","pit","iceclimbers","rob","kirby","metaknight","kingdedede","olimar","fox","falco","wolf","captainfalcon","pikachu","pokemontrainer","lucario","jigglypuff","marth","ike","ness","lucas","mrgamewatch","snake","sonic"];
		var gamePM = ["pm","wario","mario","luigi","peach","bowser","yoshi","donkeykong","diddykong","falcon","wolf","fox","falco","icies","zelda","sheik","link","toonlink","ganon","mewtwo","lucario","pikachu","jigglypuff","squirtle","ivysaur","charizard","samus","zerosuit","lucas","ness","pit","kirby","metaknight","dedede","ike","marth","roy","olimar","rob","gnw","snake","sonic"];
		var gameBrawlMinus = ["bminus","mario","luigi","peach","bowser","yoshi","donkeykong","diddy","wario","waluigi","link","zelda","sheik","ganondorf","toonlink","samus","zss","ness","lucas","pikachu","jigglypuff","pichu","mewtwo","squirtle","ivysaur","charizard","lucario","kirby","dedede","mk","fox","falco","wolf","marth","roy","ike","captainfalcon","gnw","iceclimbers","rob","pit","olimar","snake","sonic"];
		var gameBrawlZeus = ["zeus","mario","luigi","peach","koopa","yoshi","dk","dd","wario","link","zelda","sheik","ganon","tlik","samus","zss","ness","lucas","pikachu","pichu","purin","m2","zenigame","fushigisou","lizardon","lucario","kirby","ddd","MK","fox","falco","wolf","marth","roy","ike","lucina","wayu","cf","gw","rob","pit","olimar","snake","sonic","4cloud","blackpit","cloudminus","geno","knuckles","lyn","mac","meta","ridley","ryu","shadow","shulk"];
		var gameDBFZ = ["dbfz", "ad16", "ad18", "ad21", "bardock", "beerus", "broly", "cell", "frieza", "ginyu", "gohan", "goku", "gokublack", "gotenks", "hit", "kidbuu", "krillin", "majinbuu", "nappa", "piccolo", "ssgoku", "ssvageta", "tgohan", "tien", "trunks", "vageta", "yamcha", ]
		var gameSFV = ["sfv","alex","akuma","balrog","birdie","cammy","chunli","dhalsim","fang","guile","ibuki","karin","ken","kolin","laura","mbison","nash","necalli","rashid","rmika","ryu","vega","zangief","juri","urien"];
		var gameGGREV = ["ggrev","answer","axl","baiken","bedman","chipp","elphelt","faust","ino","jacko","jam","johnny","kum","ky","leo","may","millia","potemkin","ramlethal","raven","sin","slayer","sol","venom","zato1","dizzy"];
		var gameSSF2 = ["ssf2","mario","dk","link","kirby","samus","megaman","fox","ness","pikachu","sonic","peach","wario","zelda","sheik","metaknight","zss","bomberman","falcon","blackmage","jigglypuff","tails","yoshi","marth","lloyd","chibirobo","sora","ichigo","naruto","goku"];
		var game3S = ["3s", "akuma", "alex", "chunli", "dudley", "elena", "gill", "hugo", "ibuki", "ken", "makoto", "necro", "oro", "q", "remy", "ryu", "sean", "twelve", "urien", "yang", "yun"]
		var gameOW = ["ow","ana","bastion","doomfist","dva","genji","hanzo","junkrat","lucio","mccree","mei","mercy","moira","orisa","pharah","reaper","reinhardt","roadhog","soldier","sombra","symmetra","torbjorn","tracer","widowmaker","winston","zarya","zenyatta"];
		var gameBrawlhalla = ["bh","ada","asuri","azoth","barraza","bodvar","brynn","cassidy","diana","ember","gnash","hattori","jhala","koji","kor","lordvraxx","lucien","orion","queennai","ragnir","scarlet","sentinel","sirroland","teros","thatch","ulgrim","val","wushang"];
		
		var singleTier = "<tr><td class='labelHolder' contenteditable='true' style='background-color:#FFFF7F'><span class='label'>NEW</span></td><td><div class='tier sort' id='rows'><div class='hiddenkid'></div></div></td><td class='tButtons'><div id='settings'></div><div id='moveButtons'><div id='moveUp'></div><div id='moveDown'></div></div></td></tr>";
		
		var screenshotMode = false;
		var colors = ["#FF7F7F","#FFBF7F","#FFDF7F","#FFFF7F","#BFFF7F","#7FFF7F","#7FFFFF","#7FBFFF","#7F7FFF","#FF7FFF","#BF7FBF","#3B3B3A","#858585", "#F7F7F7"];
		// first is the row in the table of the tier, second is the index of its color
		var tierDefaults = [ [$("tr:nth-of-type(1)"), 0],
					  [$("tr:nth-of-type(2)"), 1],
					  [$("tr:nth-of-type(3)"), 3],
					  [$("tr:nth-of-type(4)"), 5],
					  [$("tr:nth-of-type(5)"), 7],
					  [$("tr:nth-of-type(6)"), 8],
					  [$("tr:nth-of-type(7)"), 9] ];
		var tier = []; // format: [element, color id]
		var tierlist = [];
		var currentTier; // i mean come on!
		var tempTier;
		var tierIndex;
		var currentColor;
		var colorIndex;
		var currentGame;
		var currentGameChars = gameMelee;
		var characters;
		var resized,tableWidth;
		var defaultList = "melee==S|5==A|4==B|3==C|1==F|0";

		for (var i = 0; i < tierDefaults.length; i++) {
			tierDefaults[i][0].find(".labelHolder").css("background",colors[tierDefaults[i][1]]);
		}
			
		$(document).on("load", function(){

		});

		$(document).on("click", "#settings", function() { // open settings modal
			currentTier = $(this).parent().parent();
			currentColor = currentTier.find(".labelHolder").css("background-color");
			$("textarea").val(currentTier.find(".labelHolder").text());
			colorIndex = colors.indexOf(rgb2hex(currentColor).toUpperCase());
			tier = [currentTier, colorIndex];
			console.log(tier);
			for (var i = 0; i < $("#modal span").length; i++) {
				$("#modal span:nth-of-type("+(i+1)+")").attr("class","nope");
			}
			$("#modal span:nth-of-type("+(colorIndex+1)+")").attr("class","selected");
			$("#modal").css("display","block");
			$("#overlay").css("opacity", 1);
			$("#overlay").css("visibility", "visible");
			$("#modal").css("top",alignPopup($("#modal")));
		});
		
		$(document).on("click", "#game", function() { // open game changer modal
			$("#gameChange").css("display","block");
			$("#overlay").css("opacity", 1);
			$("#overlay").css("visibility", "visible");
			$("#gameChange").css("top",alignPopup($("#gameChange")));
		});
		
		$(document).on("click", "#help", function() { // open help modal
			$("#helpMenu").css("display","block");
			$("#overlay").css("opacity", 1);
			$("#overlay").css("visibility", "visible");
			$("#helpMenu").css("top",alignPopup($("#helpMenu")));
		});
		
		$(document).on("click", "#colorselect span", function() { // change row label
			for (var i = 0; i < $("#modal span").length; i++) {
				$("#modal span:nth-of-type("+(i+1)+")").attr("class","nope");
			}
			$(this).attr("class","selected");
			currentTier.find(".labelHolder").css("background-color",$(this).css("background-color"));
			updateTiers();
		});
		
		$(document).on("click", "#gameChange button", function() { // change game
			console.log("game switching");
			switch($(this).attr("id")) {
				case "switch64": changeGame(game64);break;
				case "switchMelee": changeGame(gameMelee);break;
				case "switchBrawl": changeGame(gameBrawl);break;
				case "switchPM": changeGame(gamePM);break;
				case "switchBrawlMinus": changeGame(gameBrawlMinus);break;
				case "switchBrawlZeus": changeGame(gameBrawlZeus);break;
				// case "switchSmash4": changeGame(gameSmash4);break;
				case "switchSSB4Renders": changeGame(gameSSB4Renders);break;
				case "switchSFV": changeGame(gameSFV);break;
				case "switch3S": changeGame(game3S);break;
				case "switchDBFZ": changeGame(gameDBFZ);break;
				case "switchGGREV": changeGame(gameGGREV);break;
				case "switchSSF2": changeGame(gameSSF2);break;
				case "switchBrawlhalla": changeGame(gameBrawlhalla);break;
				case "switchOW": changeGame(gameOW);break;
			}
		});
			
		$(document).on("click", function(e) {
			clicked = e.target.id;
			if(clicked == "overlay" || clicked == "modalWrapper" || clicked == "close") { // close modals
				$("#overlay").css("opacity", 0);
				$("#overlay").css("visibility", "hidden");
				$("#modal").css("display", "none");
				$("#gameChange").css("display", "none");
				$("#helpMenu").css("display", "none");
				$("#screenshotShow").css("display", "none");
			} else if(clicked == "screenshot") { // take a screenshot
				$("#exportcode").val(toCode());
				$("#modal").css("display", "none");
				$("#gameChange").css("display", "none");
				$("#helpMenu").css("display", "none");
				$("#screenshotShow canvas").remove();
				$("#screenshotShow").css("display","block");
				$("#overlay").css("opacity", 1);
				$("#overlay").css("visibility", "visible");
				$("td:last-of-type").css("display","none");
				$(".controlList").css("background-image", "url(img/background.jpg");
				html2canvas($("table"), {
				  onrendered: function(canvas) {
					$("#screenshotShow span").after(canvas);
					$("td:last-of-type").css("display","table-cell");
					$("#screenshotShow").css("top",alignPopup($("#screenshotShow")));
				  }
				});
			} else if(clicked == "hidebuttons") { // hide the buttons
				if (screenshotMode) {
					$("td:last-of-type").css("display","table-cell");
					$("#hidebuttons").text("Hide Controls");
					screenshotMode = false;
				} else {
					$("td:last-of-type").css("display","none");
					$("#hidebuttons").text("Show Controls");
					screenshotMode = true;
				}
			} else if(clicked == "clearRow") { // put characters in this row back into the box
				for(var i = 0; i < currentTier.find("#rows div").length; i++) {
					$("#char div:last-child").after(currentTier.find("#rows div"));
				}
			} else if(clicked == "deleteRow") { // delete this row
				for(var i = 0; i < currentTier.find("#rows div").length; i++) {
					$("#char div:last-child").after(currentTier.find("#rows div"));
				}
				currentTier.remove();
				updateTiers();
				$("#overlay").css("opacity", 0);
				$("#overlay").css("visibility", "hidden");
				$("#modal").css("display", "none");
			} else if (clicked == "addRowUp") { // add a row on top of the current row
				$("tr:nth-of-type("+($("tr").index(currentTier)+1)+")").before(singleTier);
				updateTiers();
			} else if (clicked == "addRowBelow") { // add a row below the current row
				$("tr:nth-of-type("+($("tr").index(currentTier)+1)+")").after(singleTier);
				updateTiers();
			} else if (clicked == "moveUp") { // move the row above the row above it
				currentTier = $(e.target).closest("tr");
				if (currentTier.prev("tr").length != 0)
					currentTier.insertBefore(currentTier.prev("tr"));
			} else if (clicked == "moveDown") { // move the row below the row below it
				currentTier = $(e.target).closest("tr");
				if (currentTier.next("tr").length != 0)
					currentTier.insertAfter(currentTier.next("tr"));
			} else if (clicked == "runCode") {
				loadCode($("#exportcode").val());
			} else if (clicked == "reset") {
				switch(currentGameChars[0]) {
					case "64": changeGame(game64);break;
					case "melee": changeGame(gameMelee);break;
					case "brawl": changeGame(gameBrawl);break;
					case "bminus": changeGame(gameBrawlMinus);break;
					case "zeus": changeGame(gameBrawlZeus);break;
					case "pm": changeGame(gamePM);break;
					// case "ssb4": changeGame(gameSmash4);break;
					case "sfv": changeGame(gameSFV);break;
					case "3s": changeGame(game3S);break;
					case "ggrev": changeGame(gameGGREV);break;
					case "ssf2": changeGame(gameSSF2);break;
					case "dbfz": changeGame(gameDBFZ);break;
					case "bh": changeGame(gameBrawlhalla);break;
					case "ow": changeGame(gameOW);break;
				}
				loadCode(currentGameChars[0]+"melee==S|5==A|4==B|3==C|1==F|0");
			}
		});
		
		$("#labelName").bind("input propertychange", function() {
			currentTier.find(".label").html($("#labelName").val().replace(/\n/g, "<br>"));
		});
		
		// http://stackoverflow.com/a/3971432 thanks Zack Katz :D
		function rgb2hex(rgb) {
			rgb = rgb.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);
			function hex(x) {
				return ("0" + parseInt(x).toString(16)).slice(-2);
			}
			return "#" + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
		}
		
		function updateTiers() {
			tierlist = [];
			tempTier = currentTier;
			for (var i = 0; i < $("tr").length; i++) {
				currentTier = $("tr:nth-of-type("+(i+1)+")");
				currentColor = currentTier.find(".labelHolder").css("background-color"); // returns in rgb format, have to convert to hex
				tier[0] = currentTier;
				tier[1] = colors.indexOf(rgb2hex(currentColor).toUpperCase());
				console.log(tier);
				tierlist.push(tier);
			}
			currentTier = tempTier;
			console.log(tierlist);
		}
		
		function changeGame(game) {
			currentGameChars = [];
			currentGameChars = game;
			currentGame = game[0];
			$(".character").each( function() {
				$(this).remove();
			});
			for (var i = 1; i < game.length; i++) {
				$("#char div:last-child").after(singleChar);
				$("#char div:last-child").css("background-image","url(img/"+currentGame+"/"+game[i]+".png)");
				$("#char div:last-child").attr("id",i);
			}
			$("h1 span").text(currentGame);
			updateTiers();
		}

		
		function toCode() { // format game==label|color|char1|char2|...==label|color|char1|char2|...==...
			var codeColors = [], labels = [], currentChars = [], shareCode = "";
			characters = [];
			$("tr").each( function() {
				currentChars = [];
				labels.push($(this).find(".label").html());
				codeColors.push(colors.indexOf(rgb2hex($(this).find(".labelHolder").css("background-color")).toUpperCase()));
				$(this).find(".character").each( function() {
					currentChars.push($(this).attr("id"));
				});
				characters.push(currentChars);
			});
			shareCode += currentGame + "==";
			for (var i = 0; i < labels.length; i++) {
				shareCode += labels[i] +"|"+ codeColors[i];
				if (characters[i].length != 0)
					shareCode += "|";
				for (var c = 0; c < characters[i].length; c++) {
					shareCode += characters[i][c];
					if (c != characters[i].length-1)
						shareCode += "|";
				}
				if (i != labels.length-1)
					shareCode += "==";
			}
			console.log(shareCode);
			return shareCode;
		}
		
		function loadCode(code) {
			var codeSplit = [], tempTier = [], processedCode = [];
			codeSplit = code.split("==");
			for (var i = 0; i < codeSplit.length; i++) {
				tempTier = codeSplit[i].split("|");
				for (var c = 1; c < tempTier.length; c++)
					tempTier[c] = Number(tempTier[c]);
				processedCode[i] = tempTier;
			}
			$("tr").each( function() {
				$(this).remove();
			});
			// console.log(processedCode);
			switch(processedCode[0][0]) {
				case "64": changeGame(game64);break;
				case "melee": changeGame(gameMelee);break;
				case "brawl": changeGame(gameBrawl);break;
				case "bminus": changeGame(gameBrawlMinus);break;
				case "zeus": changeGame(gameBrawlZeus);break;
				case "pm": changeGame(gamePM);break;
				// case "ssb4": changeGame(gameSmash4);break;
				case "ssb4r": changeGame(gameSSB4Renders);break;
				case "sfv": changeGame(gameSFV);break;
				case "3s": changeGame(game3S);break;
				case "ggrev": changeGame(gameGGREV);break;
				case "dbfz": changeGame(gameDBFZ);break;
				case "ssf2": changeGame(gameSSF2);break;
				case "bh": changeGame(gameBrawlhalla);break;
				case "ow": changeGame(gameOW);break;
			}
			for (var i = 1; i < processedCode.length; i++) {
				$("tbody").append(singleTier);
				$("tr:last-of-type").find(".labelHolder").css("background-color",colors[processedCode[i][1]]);
				$("tr:last-of-type").find(".label").html(processedCode[i][0]);
				for (var c = 2; c < processedCode[i].length; c++) {
					$("tr:last-of-type").find(".tier div:last-child").after(singleChar);
					$("tr:last-of-type").find(".tier div:last-child").css("background-image","url(img/"+processedCode[0]+"/"+currentGameChars[processedCode[i][c]]+".png)");
					$("tr:last-of-type").find(".tier div:last-child").attr("id",processedCode[i][c]);
					$("#char #"+processedCode[i][c]).remove();
				}
			}
		}
		
		function loadDefault() {
			loadCode("melee==S|5==A|4==B|3==C|1==F|0");
		}

		function tierlistSize() {
			if ($("table").width > $("#tablewrap").width)
				$("#tablewrap").css("display","table-cell");
			else
				$("#tablewrap").css("display","block");
		}
		
		function alignPopup(popup) {
			return Math.floor(($(window).height() - popup.height())/2)+"px";
		}

		$(document).ready( function() {
			$("#char").html("<div></div>");
			if (localStorage.getItem("TierListMakerCode") === null)
				changeGame(gameMelee);
			else {
				$("#exportcode").val(localStorage.getItem("TierListMakerCode"));
				loadCode(localStorage.getItem("TierListMakerCode"));
			}
			updateTiers();
			tierlistSize();
		});
		$(window).resize( function () {
			tierlistSize();
		})
		
	</script>
	<script type="text/javascript">window.onload=loadDefault();</script>
</body>
</html>